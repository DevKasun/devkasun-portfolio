---
import { Picture } from 'astro:assets';
import PageLayout from '../layouts/PageLayout.astro';
import myProfilePic from '../assets/images/profile-pic.png';
import { HOME_SITE_TITLE, HOME_SITE_DESCRIPTION } from '../consts';
---

<PageLayout title={HOME_SITE_TITLE} description={HOME_SITE_DESCRIPTION}>
	<main class='home h-screen py-28 flex items-center justify-center'>
		<div class='home-content flex flex-col items-center text-center'>
			<Picture
				src={myProfilePic}
				widths={[250, 320]}
				sizes='(max-width: 767px) 250px, 320px'
				formats={['webp', 'avif', 'png']}
				class='profile-pic rounded-full bg-kred border-4 border-solid border-kgreen w-[100%] lg:w-[100%]'
				alt='My profile picture'
			/>
			<h4 class='developer-title pt-4 pb-2 md:pt-8 md:pb-4 text-2xl lg:text-4xl'>
				Developer
			</h4>
			<h1 class='main-title text-5xl md:text-7xl lg:text-8xl text-kred'>
				<span class='name-line-1'>Kasun</span>
				<br />
				<span class='name-line-2'>Lakshitha</span>
			</h1>
		</div>
	</main>
</PageLayout>

<script>
	import { gsap } from 'gsap';

	document.addEventListener('DOMContentLoaded', () => {
		const tl = gsap.timeline();

		// Set initial states
		gsap.set('.profile-pic', { 
			scale: 0, 
			rotation: -180, 
			opacity: 0 
		});
		
		gsap.set('.developer-title', { 
			y: 50, 
			opacity: 0 
		});
		
		gsap.set('.name-line-1, .name-line-2', { 
			y: 100, 
			opacity: 0 
		});

		// Animation sequence
		tl.to('.profile-pic', {
			scale: 1,
			rotation: 0,
			opacity: 1,
			duration: 1.2,
			ease: 'back.out(1.7)',
		})
		.to('.developer-title', {
			y: 0,
			opacity: 1,
			duration: 0.8,
			ease: 'power2.out',
		}, '-=0.3')
		.to('.name-line-1', {
			y: 0,
			opacity: 1,
			duration: 0.8,
			ease: 'power2.out',
		}, '-=0.2')
		.to('.name-line-2', {
			y: 0,
			opacity: 1,
			duration: 0.8,
			ease: 'power2.out',
		}, '-=0.6');

		// Floating animation loop for profile picture
		gsap.to('.profile-pic', {
			y: -10,
			duration: 2,
			ease: 'power2.inOut',
			yoyo: true,
			repeat: -1,
			delay: 2
		});

		// Subtle text breathing effect
		gsap.to('.main-title', {
			scale: 1.02,
			duration: 3,
			ease: 'power2.inOut',
			yoyo: true,
			repeat: -1,
			delay: 2.5
		});
	});
</script>
