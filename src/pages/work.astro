---
import { Image } from 'astro:assets';
import PageLayout from '../layouts/PageLayout.astro';
import linkIcon from '../assets/icons/arrow-up-right.svg';
import workPageImage from '../../public/work.png';
import projectPortfolio from '../assets/images/projects/project-portfolio.png';
import projectLiquidX from '../assets/images/projects/liquid-x.png';
import projectAlfastack from '../assets/images/projects/project-alfastack.png';
import projectKeExpenseTracker from '../assets/images/projects/ke-expense-tracker.png';
import llf from '../assets/images/projects/llf.png';

import { WORK_SITE_TITLE, WORK_SITE_DESCRIPTION } from '../consts';
import ProjectCard from '../components/ProjectCard.astro';

const myProjects = [
  {
    title: "Portfolio website",
    imageUrl: projectPortfolio,
    projectUrl: "https://www.devkasun.me/",
    techStack: ["Astro", "TailwindCSS", "pnpm", "Vercel"]
  },
  {
    title: "Liquid X (Glassmorphism UI)",
    imageUrl: projectLiquidX,
    projectUrl: "https://liquid-x-ten.vercel.app/",
    techStack: ["Vue", "SCSS", "Bun", "Vercel"]
  },
  {
    title: "Project Alfastack",
    imageUrl: projectAlfastack,
    projectUrl: "https://project-alfastack.vercel.app/",
    techStack: ["Next JS", "TailwindCSS", "Lenis", "Motion"]
  },
  {
    title: "KeExpense Tracker",
    imageUrl: projectKeExpenseTracker,
    projectUrl: "https://ke-expense-tracker.vercel.app",
    techStack: ["Next JS", "TailwindCSS", "Supabase", "GSAP", "Lenis"]
  },
  {
    title: "LLF",
    imageUrl: llf,
    projectUrl: "https://llfonline.com",
    techStack: ["PHP", "SCSS", "Jquery", "OWL Carousel"]
  }
];

---

<PageLayout title={WORK_SITE_TITLE} description={WORK_SITE_DESCRIPTION}>
	<main class='about py-28'>
		<section class='pb-14'>
			<div class='container mx-auto px-8'>
				<div class='flex flex-col gap-8 pb-8 lg:grid lg:grid-cols-5'>
					<div class='col-span-2' data-animate="hero-left">
						<Image
							src={workPageImage}
							width={1280}
							height={720}
							alt='developer_image'
							decoding='async'
							loading='lazy'
						/>
						<h2 class='text-4xl py-6'>My Work</h2>
					</div>
					<div class='col-span-3 flex flex-col gap-4' data-animate="hero-right">

						{myProjects.map((project) => (
     					    <ProjectCard
     							title={project.title}
     							imageUrl={project.imageUrl}
     							projectUrl={project.projectUrl}
     							techStack={project.techStack}
      				        />
						))}

					</div>
				</div>

			</div>
		</section>
	</main>
</PageLayout>

<script>
	import { gsap } from 'gsap';

	document.addEventListener('DOMContentLoaded', () => {
		// Set initial states
		gsap.set('[data-animate="hero-left"]', {
			opacity: 0,
			x: -50
		});

		gsap.set('[data-animate="hero-right"]', {
			opacity: 0,
			x: 50
		});

		gsap.set('[data-animate="project-card"]', {
			opacity: 0,
			y: 30
		});

		// Create timeline for coordinated animations
		const tl = gsap.timeline({ defaults: { ease: 'power2.out' } });

		// Animate hero sections
		tl.to('[data-animate="hero-left"]', {
			opacity: 1,
			x: 0,
			duration: 0.8,
		})
		.to('[data-animate="hero-right"]', {
			opacity: 1,
			x: 0,
			duration: 0.8,
		}, '-=0.6')
		.to('[data-animate="project-card"]', {
			opacity: 1,
			y: 0,
			duration: 0.6,
			stagger: 0.2,
		}, '-=0.4');
	});
</script>
